{"version":3,"sources":["02-chunks/05-modals/modals.js"],"names":["$","Drupal","behaviors","modal","attach","context","once","each","modalTrigger","modalID","attr","modalItem","modalClose","find","click","e","preventDefault","addClass","show","fadeIn","test","navigator","userAgent","focus","css","document","on","removeAttr","removeClass","fadeOut","end","hide","scrollTop","offset","top","window","onload","setTimeout","keydownHandler","evt","event","keyCode","which","returnValue","firstAnchor","getElementById","lastAnchor","querySelector","addEventListener","attachEvent","jQuery"],"mappings":"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","sourcesContent":["(function($, Drupal) {\n\n/* MODAL WINDOWS\n------------------------------------ */\nDrupal.behaviors.modal = {\n\tattach: function (context, settings) {\n\t\t$('.modal-trigger', context).once('modal_window').each(function(){\n      var modalTrigger = $(this);\n      var modalID = modalTrigger.attr('aria-controls');\n      var modalItem = $('#' + modalID);\n      var modalClose = '#' + modalItem.find('.modal-close').attr('id');\n\n\t\t\t//open the newsletter modal form on click\n      $(this).click(function(e){\n        e.preventDefault();\n        modalItem.attr('aria-modal','true').addClass('active-modal').show(0).find('.modal-inner').fadeIn(400);\n        if (!( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))) {\n          modalItem.find('input:first').focus();\n        }\n        $('body').css('position','fixed');\n        return false;\n      });\n      \n      //close the modal form on close click\n      $(document).on('click', modalClose, function(e){\n        e.preventDefault();\n        modalItem.removeAttr('aria-modal').removeClass('active-modal').find('.modal-inner').fadeOut(400).end().hide(0);\n        if (!( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))) {\n          modalTrigger.focus();\n        }\n        $('body').css('position','static');\n        $(document).scrollTop(modalTrigger.offset().top - 200); \n      });\n\n      \n      //trap focus\n      window.onload = function() {\n        setTimeout(function(){\n          var firstAnchor = document.getElementById(modalItem.find('.modal-close').attr('id')),\n              lastAnchor = document.querySelector('.modal-content *[type=\"submit\"]:last-of-type');\n\n          function keydownHandler(e) {\n            var evt = e || window.event;\n            var keyCode = evt.which || evt.keyCode;\n            if(keyCode === 9) { // TAB pressed\n                if(evt.preventDefault) evt.preventDefault();\n                else evt.returnValue = false;\n                firstAnchor.focus();\n            }\n          }\n\n          if(lastAnchor.addEventListener) lastAnchor.addEventListener('keydown', keydownHandler, false);\n          else if(lastAnchor.attachEvent) lastAnchor.attachEvent('onkeydown', keydownHandler);\n        }, 300);\n      }\n\t\t});\n\t}\n};\n\n\n})(jQuery, Drupal);\n"],"file":"modals.js"}